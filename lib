-- Services
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local Player = game.Players.LocalPlayer

-- UI Setup
local MatexUI = Instance.new("ScreenGui")
MatexUI.Name = "MatexUI"
MatexUI.Parent = Player:WaitForChild("PlayerGui")
MatexUI.ResetOnSpawn = false
MatexUI.IgnoreGuiInset = true

-- Toggle Button
local ToggleBtn = Instance.new("TextButton")
ToggleBtn.Size = UDim2.new(0, 120, 0, 40)
ToggleBtn.Position = UDim2.new(0, 20, 1, -60)
ToggleBtn.AnchorPoint = Vector2.new(0, 1)
ToggleBtn.Text = "Show / Hide"
ToggleBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
ToggleBtn.TextColor3 = Color3.new(1, 1, 1)
ToggleBtn.Font = Enum.Font.Gotham
ToggleBtn.TextSize = 16
ToggleBtn.Parent = MatexUI

-- Main Frame
local MatexFrame = Instance.new("Frame")
MatexFrame.Size = UDim2.new(0, 350, 0, 250)
MatexFrame.Position = UDim2.new(0, 180, 1, 0)
MatexFrame.AnchorPoint = Vector2.new(0.5, 0)
MatexFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MatexFrame.Active = true
MatexFrame.Parent = MatexUI

-- Tween In from Bottom
local tween = TweenService:Create(MatexFrame, TweenInfo.new(0.6, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
	Position = UDim2.new(0, 180, 0, 0)
})
tween:Play()

-- Draggable (Mobile + PC)
local dragging, dragStart, startPos
local function updateDrag(input)
	local delta = input.Position - dragStart
	MatexFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

local function beginDrag(input)
	dragging = true
	dragStart = input.Position
	startPos = MatexFrame.Position

	input.Changed:Connect(function()
		if input.UserInputState == Enum.UserInputState.End then
			dragging = false
		end
	end)
end

MatexFrame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		beginDrag(input)
	end
end)

MatexFrame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		UserInputService.InputChanged:Connect(function(i)
			if i == input and dragging then
				updateDrag(i)
			end
		end)
	end
end)

-- Show/Hide
ToggleBtn.MouseButton1Click:Connect(function()
	MatexFrame.Visible = not MatexFrame.Visible
end)

-- Title Bar
local TitleBar = Instance.new("TextLabel")
TitleBar.Size = UDim2.new(1, 0, 0, 40)
TitleBar.Text = "Matex Hub"
TitleBar.TextColor3 = Color3.new(1, 1, 1)
TitleBar.Font = Enum.Font.GothamBold
TitleBar.TextSize = 18
TitleBar.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
TitleBar.Parent = MatexFrame

-- Tab List
local TabList = Instance.new("ScrollingFrame")
TabList.Size = UDim2.new(0, 100, 1, -40)
TabList.Position = UDim2.new(0, 0, 0, 40)
TabList.CanvasSize = UDim2.new(0, 0, 2, 0)
TabList.ScrollBarThickness = 4
TabList.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
TabList.Parent = MatexFrame

-- Content Frame
local ContentFrame = Instance.new("Frame")
ContentFrame.Size = UDim2.new(1, -100, 1, -40)
ContentFrame.Position = UDim2.new(0, 100, 0, 40)
ContentFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
ContentFrame.Parent = MatexFrame

-- Theme + Tabs
local Theme = {
	text = Color3.fromRGB(255, 255, 255),
	background = Color3.fromRGB(25, 25, 25)
}

local function CreateTab(name)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1, -10, 0, 40)
	btn.Position = UDim2.new(0, 5, 0, #TabList:GetChildren() * 45)
	btn.Text = name
	btn.TextColor3 = Theme.text
	btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	btn.Font = Enum.Font.Gotham
	btn.TextSize = 14
	btn.Parent = TabList

	local page = Instance.new("Frame")
	page.Size = UDim2.new(1, 0, 1, 0)
	page.BackgroundColor3 = Theme.background
	page.Visible = false
	page.Parent = ContentFrame

	btn.MouseButton1Click:Connect(function()
		for _, p in pairs(ContentFrame:GetChildren()) do
			p.Visible = false
		end
		page.Visible = true
	end)

	return page
end

-- Welcome Tab
local welcomeTab = CreateTab("Welcome")

-- Player Image
local playerImage = Instance.new("ImageLabel")
playerImage.Size = UDim2.new(0, 80, 0, 80)
playerImage.Position = UDim2.new(0.5, -40, 0, 20)
playerImage.BackgroundTransparency = 1
playerImage.Image = "https://www.roblox.com/headshot-thumbnail/image?userId="..Player.UserId.."&width=420&height=420&format=png"
playerImage.Parent = welcomeTab

-- Player Name
local playerName = Instance.new("TextLabel")
playerName.Size = UDim2.new(1, -20, 0, 30)
playerName.Position = UDim2.new(0.5, -75, 0, 110) -- Moved below the image
playerName.BackgroundTransparency = 1
playerName.Text = "Welcome, " .. Player.Name
playerName.TextColor3 = Theme.text
playerName.Font = Enum.Font.GothamBold
playerName.TextSize = 18
playerName.TextXAlignment = Enum.TextXAlignment.Center
playerName.Parent = welcomeTab

welcomeTab.Visible = true
